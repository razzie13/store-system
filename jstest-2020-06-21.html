<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARRAY TESTS</title>
    <link rel="stylesheet" type="text/css" href="styles/webstore.css">
</head>
<body>
<div id="food-products"></div>
<div id="food-products-test"></div>
</body>
<!-- FOOD PRODUCTS DATABASE -->
<script src="data/items-produce.js"></script>
<script src="data/items-meat.js"></script>

<script>
    // CREATE HEADERS FROM ITEM TYPES
    
    let newCategoryArray = [];
    for (let i = 0; i < foodProducts.length; i++)  {
        newCategoryArray.push(foodProducts[i].itemType);
    }

    let uniqueCategoryList = [...new Set(newCategoryArray)]
    uniqueCategoryList.sort();

    Object.keys(uniqueCategoryList).forEach(function(item) {
        console.log(uniqueCategoryList[item]);
        //console.log('this is irritating');

        for (let i = 0; i < foodProducts.length; i++)  {
            if (foodProducts[i].itemType == (uniqueCategoryList[item]))  {
            
            console.log(foodProducts[i].itemBrand + ' ' + foodProducts[i].itemDescription + ' ' + foodProducts[i].itemType);
            console.log(foodProducts[i].itemPrice);
        }}
        

        let h2 = document.createElement('h2');
        let h5 = document.createElement('h5');

        h2.innerText = uniqueCategoryList[item];
        h5.innerText = 'dummy text';

        h2.appendChild(h5);
        document.getElementById('food-products-test').appendChild(h2);
        
    });

</script>


<script>

    for (let i = 0; i < foodProducts.length; i++)  {
    

    let foodItemMenu = document.getElementById('food-products');

    let categoryHeader = document.createElement('h2')

    let foodItem = document.createElement('div');
    let foodItemName = document.createElement('h3');
    let foodItemPicture = document.createElement('img');
    let foodItemPrice = document.createElement('h4');
    let foodItemPromo = document.createElement('h4');

    let addToCartButton = document.createElement('button')

    //------------------------------------------------------------------------------------------

    foodItem.id = 'food-item-' + i;
    foodItem.className = 'food-item-section'

    foodItemPicture.src = foodProducts[i].itemImage;
    foodItemPicture.width = 200;

    foodItemName.innerText = foodProducts[i].itemBrand + ' ' +  foodProducts[i].itemDescription + ' ' + foodProducts[i].itemType;
    foodItemPrice.innerText = foodProducts[i].itemPrice;

    foodItemPromo.innerHTML = 'sale ' + foodProducts[i].itemPromo + '<span>  reg ' + foodProducts[i].itemPrice + '</span>';
    foodItemPromo.className = 'food-item-promo'

    addToCartButton.innerText = 'add to cart';
    //addToCartButton.setAttribute('onclick', 'addToCart(foodProducts[i])'); -- doesn't work
    //addToCartButton.setAttribute('onclick', 'addToCart()'); -- works but doesn't pass an argument
    addToCartButton.setAttribute('onclick', 'addToCart(' + foodProducts[i] + ')');
    //addToCartButton.setAttribute('onclick', 'addToCart(' + foodProducts[i].itemCode + ')'); -- works but doesn't pass all info. Works fine to print an order sheet!

    foodItem.appendChild(foodItemPicture);
    foodItem.appendChild(foodItemName);

    if (foodProducts[i].promo == false)  {
        foodItem.appendChild(foodItemPrice);

    } else  {
        foodItem.appendChild(foodItemPromo)
    }

    

    foodItem.appendChild(addToCartButton);

    document.getElementById('food-products').appendChild(foodItem);
    }
</script>

</html>